<!DOCTYPE html>
<html lang="en">

<head>
    <title>ToeTuff Gang (GNG) â€“ Free Online Browser Games</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="css/style.css?v=6">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <!-- 3D Model Viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
</head>

<body>
    <header class="navbar">
        <div class="nav-content">
            <div class="logo">
                <img src="favicon.png" alt="toetuffgng" class="logo-icon">
                <h1>toetuffgng</h1>
            </div>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search for games...">
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Featured Hero Section -->
        <section class="hero-section">
            <div class="model-showcase">
                <div class="robot-controls left-controls">
                    <button onclick="playAction('robot1', 'Wave')">Hi ğŸ‘‹</button>
                    <button onclick="playAction('robot1', 'Dance')">Dance ğŸ•º</button>
                    <button onclick="playAction('robot1', 'Sitting')">Sit ğŸª‘</button>
                    <button onclick="playAction('robot1', 'Death')">Sleep ğŸ’¤</button>
                    <button onclick="playAction('robot1', 'Punch')">Punch ğŸ¥Š</button>
                    <button onclick="playAction('robot1', 'Shoot')">Shoot ğŸ”«</button>
                    <button onclick="playAction('robot1', 'Run')">Run ğŸƒâ€â™‚ï¸</button>
                </div>
                <!-- Cloud Comment Box -->
                <div class="cloud-comment right">fun robots âœ¨</div>
                <!-- Live 3D Model 1 -->
                <model-viewer id="robot1" src="https://modelviewer.dev/shared-assets/models/RobotExpressive.glb"
                    autoplay animation-name="Idle" auto-rotate rotation-per-second="10deg" camera-controls
                    shadow-intensity="1" environment-image="neutral" camera-orbit="45deg 75deg 180%"
                    min-camera-orbit="auto auto 100%" bounds="tight"
                    style="width: 100%; height: 100%; background-color: transparent; cursor: grab;">
                </model-viewer>
            </div>
            <div class="model-showcase">
                <div class="robot-controls right-controls">
                    <button onclick="playAction('robot2', 'Wave')">Hi ğŸ‘‹</button>
                    <button onclick="playAction('robot2', 'Dance')">Dance ğŸ•º</button>
                    <button onclick="playAction('robot2', 'Sitting')">Sit ğŸª‘</button>
                    <button onclick="playAction('robot2', 'Death')">Sleep ğŸ’¤</button>
                    <button onclick="playAction('robot2', 'Punch')">Punch ğŸ¥Š</button>
                    <button onclick="playAction('robot2', 'Shoot')">Shoot ğŸ”«</button>
                    <button onclick="playAction('robot2', 'Run')">Run ğŸƒâ€â™‚ï¸</button>
                </div>
                <!-- Cloud Comment Box -->
                <div class="cloud-comment left" style="animation-delay: 1.5s;">super fun! ğŸˆ</div>
                <!-- Live 3D Model 2 -->
                <model-viewer id="robot2" src="https://modelviewer.dev/shared-assets/models/RobotExpressive.glb"
                    autoplay animation-name="Sitting" auto-rotate rotation-per-second="-10deg" camera-controls
                    shadow-intensity="1" environment-image="neutral" camera-orbit="315deg 75deg 180%"
                    min-camera-orbit="auto auto 100%" bounds="tight"
                    style="width: 100%; height: 100%; background-color: transparent; cursor: grab;">
                </model-viewer>
            </div>
        </section>

        <!-- 3D Interactions Script -->
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const models = document.querySelectorAll('model-viewer');

                models.forEach(model => {
                    // Dress Robots in Uniforms (Cloth/Fabric Material)
                    model.addEventListener('load', () => {
                        const material = model.model.materials[0];
                        if (material) {
                            // Turn off metal, turn up roughness to make them look like soft cloth/plushies!
                            material.pbrMetallicRoughness.setMetallicFactor(0);
                            material.pbrMetallicRoughness.setRoughnessFactor(1);

                            if (model.id === "robot1") {
                                // Blue Cloth Uniform
                                material.pbrMetallicRoughness.setBaseColorFactor([0.1, 0.3, 0.8, 1]);
                            } else if (model.id === "robot2") {
                                // Red Cloth Uniform
                                material.pbrMetallicRoughness.setBaseColorFactor([0.8, 0.1, 0.1, 1]);
                            }
                        }
                    });

                    // Get confused (shake head) on spin/camera move
                    model.addEventListener('camera-change', (e) => {
                        if (e.detail.source === 'user-interaction' && window.isInteracting && !window.isInteracting[model.id]) {
                            window.playAction(model.id, "No", 1500, true);
                        }
                    });
                });
            });

            window.isInteracting = { robot1: false, robot2: false };
            window.resetTimers = { robot1: null, robot2: null };
            window.baseAnimations = { robot1: "Idle", robot2: "Sitting" };

            window.playAction = (robotId, action, overrideDuration, isNo) => {
                const model = document.getElementById(robotId);
                if (!model) return;

                if (window.isInteracting[robotId] && !isNo) return;

                let duration = overrideDuration || 2500;
                if (action === "Dance" || action === "Death") duration = 3500;
                if (action === "Run") duration = 3000;
                if (action === "Punch") duration = 1500;

                // For Shoot, we use ThumbsUp animation as a proxy for holding a gun
                let animToPlay = action === "Shoot" ? "ThumbsUp" : action;

                model.animationName = animToPlay;
                window.isInteracting[robotId] = true;
                clearTimeout(window.resetTimers[robotId]);

                // Handle Fight Interaction
                if (action === "Punch" || action === "Shoot") {
                    let otherId = robotId === "robot1" ? "robot2" : "robot1";
                    let otherBot = document.getElementById(otherId);

                    if (otherBot) {
                        let delay = action === "Shoot" ? 200 : 500; // Guns hit instantly, punches take 0.5s

                        if (action === "Shoot") {
                            // Flash effect for Gunshot
                            setTimeout(() => {
                                otherBot.style.transition = "filter 0.05s";
                                otherBot.style.filter = "brightness(3) sepia(1) hue-rotate(-50deg) saturate(5)";
                                setTimeout(() => {
                                    otherBot.style.filter = "none";
                                }, 100);
                            }, 50);
                        }

                        setTimeout(() => {
                            clearTimeout(window.resetTimers[otherId]);
                            otherBot.animationName = "Death";
                            window.isInteracting[otherId] = true;

                            window.resetTimers[otherId] = setTimeout(() => {
                                otherBot.animationName = window.baseAnimations[otherId];
                                window.isInteracting[otherId] = false;
                            }, 4000); // 4 seconds KO time
                        }, delay);
                    }
                }

                // Reset back to base
                window.resetTimers[robotId] = setTimeout(() => {
                    model.animationName = window.baseAnimations[robotId];
                    window.isInteracting[robotId] = false;
                }, duration);
            };
        </script>

        <!-- Categories Filters -->
        <div class="categories" id="categoryFilters">
            <button class="cat-btn active" data-cat="all">All Games</button>
            <button class="cat-btn" data-cat="board">Board Games</button>
            <button class="cat-btn" data-cat="arcade">Arcade</button>
            <button class="cat-btn" data-cat="puzzle">Puzzle</button>
        </div>

        <!-- All Games Grid -->
        <section class="games-grid-container">
            <h2 id="sectionTitle" class="section-title">New Games</h2>
            <div class="games-grid" id="gamesGrid">
                <!-- Populated by JS -->
            </div>
        </section>
    </main>

    <script type="module" src="js/main.js?v=6"></script>
</body>

</html>